# 关于首充

## 差哪些

- 【客户端】的右上角一坨界面
- 【服务器】开启条件，等级，功能开启表
- 【客户端】弹脸
  - 打白银龙？
  - 第一次登陆角色？
  - 弹脸天数 PublicConfig表
- 【客户端】UE莫得
- 【客户端】充值A龙晶，即可获得价值B元丰富奖励，没有配，等不同版本不一样的
- 【服务器】凌晨5点标志位
- 【客户端】【服务器】字典表配置
- 【服务器】打日志
- 【客户端】Tips
- 

获得的道具绑定还是不绑定，balabala的

publicConfig

firstCharge两个表

## 改了哪些东西

- 客户端
  - 加了一个UI的prefab
  - 加了一个打开UI的Prefab的Prefab
  - 加了3个脚本
  - UIConfig表
  - Res表
- 服务器
  - SimulateChargeComponent
  - FirstChargeComponent
  - 事件

## 怎么解锁

- 充钱用来解锁挡位
- 时间用来解锁奖励
- GM同时解锁

## 两个消息

- 冲完钱 第一个是需要充值的3个东西改变 发个包；第二个是解锁挡位改变 发个包
- 其他时候 只发个包 解锁挡位奖励啥的
- 所以要拆成两个消息



## 要存什么？

- 已经充了多少钱？

> 这个放到`SimulateChargeComponent`

- 挡位解锁情况

> **被动**解锁算了，主要是为了解耦合
>
> 每次充钱的时候发个事件，这次冲了多少+累计冲了多少；
>
> 监听这个事件，看能不能解锁对应的挡位

- 奖励领取状态
- 第X挡第X天奖励的状态

- 可领取 Checkable

- 未达到金额 ChargeLocked
- 达到了金额但是没有到时间 TimeLocked
- 达到了金额，也到时间了，但是领过了 Checked

> awake里面不能直接访问数据库的数据吗？要等同步过来才有？？？

## 如果是只是被动的，那么久

每次解锁挡位的时候记录一下第几天解锁的，然后要领取的时候算一下领取的天数-解锁的天数



存的话还是用结构+字典存吧，一方面可以用到一些特性，一方面也可以方便存，不用转来转去